{% extends "base.html" %}
{% block content %}
<h2 class="mb-4 text-center">Data Visualization</h2>

<div class="accordion" id="visualizationAccordion">
  <!-- Monthly Trends in Donations and Consumption -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingTrends">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTrends" aria-expanded="true" aria-controls="collapseTrends">
        Monthly Trends in Donations and Consumption
      </button>
    </h2>
    <div id="collapseTrends" class="accordion-collapse collapse show" aria-labelledby="headingTrends" data-bs-parent="#visualizationAccordion">
      <div class="accordion-body">
        <img src="data:image/png;base64,{{ plot_url_subplots }}" alt="Subplots Visualization" class="img-fluid mb-4">
        <p class="mt-3">
          These subplots illustrate the monthly trends in donations and consumption. The separate plots allow a detailed analysis of each dataset, highlighting patterns and seasonal changes over time.
        </p>
      </div>
    </div>
  </div>
  
  <!-- EDA Plots -->
  {% for i in range(4) %}
  <div class="accordion-item">
    <h2 class="accordion-header" id="heading{{ i }}">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ i }}" aria-expanded="false" aria-controls="collapse{{ i }}">
        {{ i+1 }}. {{ eda_titles[i] }}
      </button>
    </h2>
    <div id="collapse{{ i }}" class="accordion-collapse collapse" aria-labelledby="heading{{ i }}" data-bs-parent="#visualizationAccordion">
      <div class="accordion-body">
        <img src="data:image/png;base64,{{ eda_plots[i] }}" alt="EDA Plot {{ i+1 }}" class="img-fluid mb-4">
        <p class="mt-3">{{ eda_descriptions[i] }}</p>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
